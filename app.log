2025-06-13 14:37:06,272 - INFO - --- INÍCIO DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:06,273 - INFO - local_temp_filepath (base): /tmp/da1afd39-0d06-4589-ae40-50be0f12a19f [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:06,274 - INFO - Processando upload de arquivo: 6926_07_02_2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:06,274 - INFO - Tentando salvar arquivo em '/tmp/da1afd39-0d06-4589-ae40-50be0f12a19f.pdf' [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:11,586 - INFO - Arquivo '6926_07_02_2025.pdf' salvo temporariamente em '/tmp/da1afd39-0d06-4589-ae40-50be0f12a19f.pdf'. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:11,587 - INFO - Iniciando upload para S3 para a chave: textract_uploads/56cff994-96df-42b7-acff-dbb0b4817092.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:11,587 - INFO - Tentando fazer upload do arquivo local: /tmp/da1afd39-0d06-4589-ae40-50be0f12a19f.pdf para o bucket: teste-textract-conrado com a chave: textract_uploads/56cff994-96df-42b7-acff-dbb0b4817092.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:28,203 - INFO - Upload de '/tmp/da1afd39-0d06-4589-ae40-50be0f12a19f.pdf' para s3://teste-textract-conrado/textract_uploads/56cff994-96df-42b7-acff-dbb0b4817092.pdf concluído com sucesso. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:28,205 - INFO - Upload para S3 concluído. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:28,207 - INFO - Iniciando job do Textract para a chave S3: textract_uploads/56cff994-96df-42b7-acff-dbb0b4817092.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:29,335 - INFO - Job do Textract iniciado com Job ID: 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:29,336 - INFO - Aguardando conclusão do job do Textract... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:29,495 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:34,659 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:39,839 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:45,002 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:50,173 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:37:55,344 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:00,520 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:05,701 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:10,873 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:16,542 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:21,706 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:26,900 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:32,070 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:37,235 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:42,411 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:47,580 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:52,741 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:38:57,907 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:03,081 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:08,771 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:13,936 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:19,093 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:24,261 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:29,427 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:35,792 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 concluído com status: SUCCEEDED. Duração: 02:06:06.455 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:39:35,793 - INFO - Job 9062be98319573709e57382483b26cf1633cd87eb968c8955243e06a89b15d96 bem-sucedido. Obtendo resultados... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:14,367 - INFO - Texto extraído e sanitizado com sucesso. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:14,380 - INFO - Tarefas de limpeza (S3 e local) agendadas em segundo plano. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:14,389 - INFO - --- FIM DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:14,490 - INFO - Tentando excluir o objeto S3: textract_uploads/56cff994-96df-42b7-acff-dbb0b4817092.pdf do bucket: teste-textract-conrado [method=None, endpoint=None, status_code=None]
2025-06-13 14:42:15,062 - INFO - Objeto S3 'textract_uploads/56cff994-96df-42b7-acff-dbb0b4817092.pdf' excluído com sucesso. [method=None, endpoint=None, status_code=None]
2025-06-13 14:42:42,758 - INFO - --- INÍCIO DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:42,759 - INFO - local_temp_filepath (base): /tmp/252d81c6-9340-41c9-ad24-41cbdde54b37 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:42,760 - INFO - Processando upload de arquivo: 6926_07_02_2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:42,761 - INFO - Tentando salvar arquivo em '/tmp/252d81c6-9340-41c9-ad24-41cbdde54b37.pdf' [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:48,713 - INFO - Arquivo '6926_07_02_2025.pdf' salvo temporariamente em '/tmp/252d81c6-9340-41c9-ad24-41cbdde54b37.pdf'. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:48,716 - INFO - Iniciando upload para S3 para a chave: textract_uploads/ca3bf8c7-f584-4375-a9d5-169143e38a6f.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:42:48,718 - INFO - Tentando fazer upload do arquivo local: /tmp/252d81c6-9340-41c9-ad24-41cbdde54b37.pdf para o bucket: teste-textract-conrado com a chave: textract_uploads/ca3bf8c7-f584-4375-a9d5-169143e38a6f.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 14:43:06,815 - INFO - Upload de '/tmp/252d81c6-9340-41c9-ad24-41cbdde54b37.pdf' para s3://teste-textract-conrado/textract_uploads/ca3bf8c7-f584-4375-a9d5-169143e38a6f.pdf concluído com sucesso. [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:06,817 - INFO - Upload para S3 concluído. [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:06,820 - INFO - Iniciando job do Textract para a chave S3: textract_uploads/ca3bf8c7-f584-4375-a9d5-169143e38a6f.pdf [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:07,629 - INFO - Job do Textract iniciado com Job ID: 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:07,631 - INFO - Aguardando conclusão do job do Textract... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:07,649 - INFO - Acessando página inicial. [method=GET, endpoint=/, status_code=None]
2025-06-13 14:43:07,790 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:12,962 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:18,127 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:23,293 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:28,466 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:33,632 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:38,787 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:43,959 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:49,123 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:43:54,921 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 14:44:00,088 - INFO - Job 91eb1306ab9ed2d998bed4a7796b9f0a1c7825b50a961c42c17074cd23e58b44 ainda em andamento. Verificando novamente em 5 segundos... [method=None, endpoint=None, status_code=None]
2025-06-13 16:57:29,229 - INFO - --- INÍCIO DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:29,230 - INFO - local_temp_filepath (base): /tmp/bb650dcc-cc25-4cfe-9afb-6f4107e8fa91 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:29,231 - INFO - Processando documento de URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:29,280 - INFO - Tentando baixar documento da URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:39,424 - INFO - Status da resposta HTTP para URL: 200 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:39,428 - INFO - Content-Type da URL: application/pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:39,429 - INFO - Tentando baixar e salvar arquivo da URL em '/tmp/bb650dcc-cc25-4cfe-9afb-6f4107e8fa91.pdf' [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:39,504 - INFO - Arquivo de URL 'https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf' baixado para '/tmp/bb650dcc-cc25-4cfe-9afb-6f4107e8fa91.pdf'. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:39,506 - INFO - Iniciando upload para S3 para a chave: textract_uploads/85441cf0-d4b5-41cf-aabc-59a58b841d20.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:57:39,507 - INFO - Tentando fazer upload do arquivo local: /tmp/bb650dcc-cc25-4cfe-9afb-6f4107e8fa91.pdf para o bucket: teste-textract-conrado com a chave: textract_uploads/85441cf0-d4b5-41cf-aabc-59a58b841d20.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:12,466 - INFO - Upload de '/tmp/bb650dcc-cc25-4cfe-9afb-6f4107e8fa91.pdf' para s3://teste-textract-conrado/textract_uploads/85441cf0-d4b5-41cf-aabc-59a58b841d20.pdf concluído com sucesso. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:12,468 - INFO - Upload para S3 concluído. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:12,469 - INFO - Iniciando job do Textract para a chave S3: textract_uploads/85441cf0-d4b5-41cf-aabc-59a58b841d20.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:13,310 - INFO - Job do Textract iniciado com Job ID: 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:13,316 - INFO - Aguardando conclusão do job do Textract... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:13,475 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:18,655 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:23,838 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:29,009 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:34,180 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:39,370 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:44,549 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:49,728 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:58:54,897 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:00,545 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:05,727 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:10,936 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:16,159 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:21,325 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:26,483 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:31,656 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:36,828 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:42,001 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:47,180 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:52,887 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 16:59:58,057 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:03,220 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:08,389 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:13,553 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:18,723 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:23,885 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:29,056 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:34,222 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:39,381 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:45,028 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:50,191 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:00:55,362 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:01:01,583 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd concluído com status: SUCCEEDED. Duração: 02:48:48.269 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:01:01,584 - INFO - Job 8e14238213aed22aaa6924327b51748beab24f3458188fc6d24a374c1cea5cbd bem-sucedido. Obtendo resultados... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:05:02,822 - INFO - Texto extraído e sanitizado com sucesso. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:05:02,824 - INFO - Tarefas de limpeza (S3 e local) agendadas em segundo plano. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:05:02,827 - INFO - --- FIM DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 17:05:03,008 - INFO - Tentando excluir o objeto S3: textract_uploads/85441cf0-d4b5-41cf-aabc-59a58b841d20.pdf do bucket: teste-textract-conrado [method=None, endpoint=None, status_code=None]
2025-06-13 17:05:03,731 - INFO - Objeto S3 'textract_uploads/85441cf0-d4b5-41cf-aabc-59a58b841d20.pdf' excluído com sucesso. [method=None, endpoint=None, status_code=None]
2025-06-13 18:04:33,608 - INFO - --- INÍCIO DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:33,613 - INFO - local_temp_filepath (base): /tmp/341993bb-8403-41cc-a92d-269c64f25e33 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:33,614 - INFO - Processando documento de URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:33,657 - INFO - Tentando baixar documento da URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:43,609 - INFO - Status da resposta HTTP para URL: 200 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:43,612 - INFO - Content-Type da URL: application/pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:43,613 - INFO - Tentando baixar e salvar arquivo da URL em '/tmp/341993bb-8403-41cc-a92d-269c64f25e33.pdf' [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:43,721 - INFO - Arquivo de URL 'https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf' baixado para '/tmp/341993bb-8403-41cc-a92d-269c64f25e33.pdf'. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:43,723 - INFO - Iniciando upload para S3 para a chave: textract_uploads/b2b85840-eb36-48e2-b591-66077d513995.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:04:43,725 - INFO - Tentando fazer upload do arquivo local: /tmp/341993bb-8403-41cc-a92d-269c64f25e33.pdf para o bucket: teste-textract-conrado com a chave: textract_uploads/b2b85840-eb36-48e2-b591-66077d513995.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:25,797 - INFO - Upload de '/tmp/341993bb-8403-41cc-a92d-269c64f25e33.pdf' para s3://teste-textract-conrado/textract_uploads/b2b85840-eb36-48e2-b591-66077d513995.pdf concluído com sucesso. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:25,803 - INFO - Upload para S3 concluído. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:25,804 - INFO - Iniciando job do Textract para a chave S3: textract_uploads/b2b85840-eb36-48e2-b591-66077d513995.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:26,827 - INFO - Job do Textract iniciado com Job ID: 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:26,830 - INFO - Aguardando conclusão do job do Textract... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:27,033 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:32,193 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:37,364 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:42,597 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:47,766 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:52,934 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:05:58,097 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:03,276 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:08,444 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:14,066 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:19,231 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:24,396 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:29,802 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:34,965 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:40,131 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:45,299 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:50,472 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:06:55,629 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:00,796 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:06,666 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:11,828 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:16,985 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:22,144 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:27,304 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:32,467 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:37,629 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:42,806 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:48,041 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:53,223 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:07:59,001 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e ainda em andamento. Verificando novamente em 5 segundos... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:08:05,721 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e concluído com status: SUCCEEDED. Duração: 02:38:38.891 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:08:05,722 - INFO - Job 905cf56deaa8b2852e66048cfd93421d0424526858c05d13f4eebfceca8e405e bem-sucedido. Obtendo resultados... [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:11:56,762 - INFO - Texto extraído e sanitizado com sucesso. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:11:56,764 - INFO - Tarefas de limpeza (S3 e local) agendadas em segundo plano. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:11:56,768 - INFO - --- FIM DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 18:11:56,868 - INFO - Tentando excluir o objeto S3: textract_uploads/b2b85840-eb36-48e2-b591-66077d513995.pdf do bucket: teste-textract-conrado [method=None, endpoint=None, status_code=None]
2025-06-13 18:11:57,487 - INFO - Objeto S3 'textract_uploads/b2b85840-eb36-48e2-b591-66077d513995.pdf' excluído com sucesso. [method=None, endpoint=None, status_code=None]
2025-06-13 19:10:24,661 - INFO - --- INÍCIO DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:10:24,662 - INFO - local_temp_filepath (base): /tmp/54df6199-11d5-4f97-bea7-de957fe2dbb6 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:10:24,662 - INFO - Processando documento de URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:10:24,689 - INFO - Tentando baixar documento da URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:10:54,794 - ERROR - HTTPX RequestError capturado: . Realizando limpeza do arquivo local se existir. [method=POST, endpoint=/analyze_document/, status_code=None]
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_transports/default.py", line 69, in map_httpcore_exceptions
    yield
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_transports/default.py", line 373, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.READ_NUM_BYTES, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/rafaelconrado/Desktop/projetos/modernização /api-aws-textract/main.py", line 161, in analyze_document
    response = await client.get(document_url, follow_redirects=True, timeout=30.0)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_client.py", line 1801, in get
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_client.py", line 1574, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_client.py", line 1661, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_client.py", line 1689, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_client.py", line 1726, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_client.py", line 1763, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_transports/default.py", line 372, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/httpx/_transports/default.py", line 86, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout
2025-06-13 19:10:54,810 - INFO - --- FIM DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:08,088 - INFO - --- INÍCIO DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:08,091 - INFO - local_temp_filepath (base): /tmp/bbd8531b-830a-46b0-9bb7-7b757dfae355 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:08,091 - INFO - Processando documento de URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:08,127 - INFO - Tentando baixar documento da URL: https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:16,376 - INFO - Status da resposta HTTP para URL: 200 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:16,378 - INFO - Content-Type da URL: application/pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:16,379 - INFO - Tentando baixar e salvar arquivo da URL em '/tmp/bbd8531b-830a-46b0-9bb7-7b757dfae355.pdf' [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:16,451 - INFO - Arquivo de URL 'https://transparencia.pmspa.rj.gov.br/ver20240713/tmp/lai_lei_loa/451CC597-A0E7-4777-BE4D-78AF0BE29F11_Loa-2025.pdf' baixado para '/tmp/bbd8531b-830a-46b0-9bb7-7b757dfae355.pdf'. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:16,453 - INFO - Iniciando upload para S3 para a chave: textract_uploads/79286fe5-834b-428d-85b4-cf8e6c9e931c.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:16,453 - INFO - Tentando fazer upload do arquivo local: /tmp/bbd8531b-830a-46b0-9bb7-7b757dfae355.pdf para o bucket: teste-textract-conrado com a chave: textract_uploads/79286fe5-834b-428d-85b4-cf8e6c9e931c.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:56,544 - INFO - Upload de '/tmp/bbd8531b-830a-46b0-9bb7-7b757dfae355.pdf' para s3://teste-textract-conrado/textract_uploads/79286fe5-834b-428d-85b4-cf8e6c9e931c.pdf concluído com sucesso. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:56,548 - INFO - Upload para S3 concluído. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:56,549 - INFO - Iniciando job do Textract para a chave S3: textract_uploads/79286fe5-834b-428d-85b4-cf8e6c9e931c.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:57,602 - INFO - Job do Textract iniciado com Job ID: 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:57,603 - INFO - Job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 iniciado. Retornando Job ID para o cliente. Cliente deve consultar status e resultados. [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:57,604 - INFO - Agendada exclusão do arquivo temporário local: /tmp/bbd8531b-830a-46b0-9bb7-7b757dfae355.pdf [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:14:57,605 - INFO - --- FIM DA EXECUÇÃO DO /analyze_document/ --- [method=POST, endpoint=/analyze_document/, status_code=None]
2025-06-13 19:16:47,738 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:48,409 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:48,411 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:50,510 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:50,660 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:50,663 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:52,173 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:52,327 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:52,329 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:53,299 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:53,451 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:53,454 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:54,521 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:54,679 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:16:54,682 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:00,233 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:00,396 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:00,397 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:01,137 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:01,288 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:01,290 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:01,915 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:02,072 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:02,076 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:02,725 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:02,880 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:02,881 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:04,801 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:04,957 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:04,959 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:05,854 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:06,517 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:06,519 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:07,544 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:07,782 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:07,786 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:08,720 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:08,877 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:08,878 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:09,756 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:09,911 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:09,914 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:10,666 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:10,827 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:10,829 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:12,333 - INFO - --- INÍCIO DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:12,491 - INFO - Status do job 6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 obtido do Textract: IN_PROGRESS [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
2025-06-13 19:17:12,494 - INFO - --- FIM DA EXECUÇÃO DO /get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1 --- [method=GET, endpoint=/get_analysis_status/6536cfa42afae194feeb98110991da6c3ebd9b029bbc4ec7b98854113ec375c1, status_code=None]
